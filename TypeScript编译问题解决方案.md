# TypeScript ç¼–è¯‘é—®é¢˜è§£å†³æ–¹æ¡ˆ

## âŒ é”™è¯¯ä¿¡æ¯

```
ReferenceError: App is not defined
ReferenceError: Page is not defined
```

## ğŸ” é—®é¢˜åŸå› 

1. ç¼ºå°‘å¾®ä¿¡å°ç¨‹åºçš„ç±»å‹å®šä¹‰åŒ…
2. `project.config.json` æœªæ­£ç¡®é…ç½® TypeScript
3. å¾®ä¿¡å¼€å‘è€…å·¥å…·éœ€è¦é‡æ–°ç¼–è¯‘

## âœ… è§£å†³æ­¥éª¤

### ç¬¬1æ­¥ï¼šå®‰è£…ä¾èµ–åŒ…ï¼ˆé‡è¦ï¼ï¼‰

åœ¨ `yuntun-wechat` ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
npm install
```

è¿™ä¼šå®‰è£…ï¼š
- `miniprogram-api-typings` - å¾®ä¿¡å°ç¨‹åºå®˜æ–¹ç±»å‹å®šä¹‰
- `typescript` - TypeScript ç¼–è¯‘å™¨

### ç¬¬2æ­¥ï¼šæ¸…é™¤ç¼“å­˜

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼š

1. ç‚¹å‡»èœå•æ  **"å·¥å…·"**
2. é€‰æ‹© **"æ¸…é™¤ç¼“å­˜"**
3. ç‚¹å‡» **"æ¸…é™¤å…¨éƒ¨ç¼“å­˜"**
4. ç­‰å¾…ç¼“å­˜æ¸…é™¤å®Œæˆ

### ç¬¬3æ­¥ï¼šé‡æ–°ç¼–è¯‘

1. å…³é—­å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. é‡æ–°æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
3. å¯¼å…¥é¡¹ç›® `yuntun-wechat`
4. ç‚¹å‡» **"ç¼–è¯‘"** æŒ‰é’®

### ç¬¬4æ­¥ï¼šéªŒè¯é…ç½®

#### æ£€æŸ¥ `project.config.json`

ç¡®ä¿åŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "setting": {
    "es6": true,
    "enhance": true,
    "useCompilerPlugins": ["typescript"]
  }
}
```

#### æ£€æŸ¥ `tsconfig.json`

ç¡®ä¿ `types` å­—æ®µæ­£ç¡®ï¼š

```json
{
  "compilerOptions": {
    "types": ["miniprogram-api-typings"]
  }
}
```

#### æ£€æŸ¥ `typings/index.d.ts`

ç¡®ä¿ç¬¬ä¸€è¡Œæ˜¯ï¼š

```typescript
/// <reference types="miniprogram-api-typings" />
```

## ğŸ¯ å®Œæ•´æ“ä½œæµç¨‹

### æ–¹æ¡ˆ1ï¼šä½¿ç”¨ npmï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd yuntun-wechat

# 2. å®‰è£…ä¾èµ–
npm install

# 3. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
# 4. æ¸…é™¤ç¼“å­˜ï¼ˆå·¥å…· -> æ¸…é™¤ç¼“å­˜ -> æ¸…é™¤å…¨éƒ¨ç¼“å­˜ï¼‰
# 5. é‡æ–°ç¼–è¯‘
```

### æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨å®‰è£…ï¼ˆå¦‚æœ npm install å¤±è´¥ï¼‰

å¦‚æœ `npm install` å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨é…ç½®ï¼š

1. åˆ é™¤ `node_modules` æ–‡ä»¶å¤¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
2. åˆ é™¤ `package-lock.json` æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
3. é‡æ–°æ‰§è¡Œ `npm install`

å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œå°è¯•ä½¿ç”¨ cnpm æˆ– yarnï¼š

```bash
# ä½¿ç”¨ cnpm
npm install -g cnpm --registry=https://registry.npmmirror.com
cnpm install

# æˆ–ä½¿ç”¨ yarn
npm install -g yarn
yarn install
```

### æ–¹æ¡ˆ3ï¼šè·³è¿‡ TypeScriptï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰

å¦‚æœå®åœ¨æ— æ³•è§£å†³ TypeScript é—®é¢˜ï¼Œå¯ä»¥ä¸´æ—¶å°†æ‰€æœ‰ `.ts` æ–‡ä»¶æ”¹ä¸º `.js` æ–‡ä»¶ï¼š

1. å°†æ‰€æœ‰ `.ts` æ–‡ä»¶é‡å‘½åä¸º `.js`
2. åˆ é™¤ `tsconfig.json`
3. é‡æ–°ç¼–è¯‘

**æ³¨æ„ï¼š** è¿™ä¼šå¤±å» TypeScript çš„ç±»å‹æ£€æŸ¥åŠŸèƒ½ï¼Œä¸æ¨èé•¿æœŸä½¿ç”¨ã€‚

## ğŸ”§ å¸¸è§é—®é¢˜

### Q1: npm install å¾ˆæ…¢

**A:** ä½¿ç”¨å›½å†…é•œåƒæº

```bash
# ä¸´æ—¶ä½¿ç”¨
npm install --registry=https://registry.npmmirror.com

# æ°¸ä¹…è®¾ç½®
npm config set registry https://registry.npmmirror.com
```

### Q2: æç¤º"æ‰¾ä¸åˆ°æ¨¡å— miniprogram-api-typings"

**A:** ç¡®ä¿ `package.json` ä¸­æœ‰è¿™ä¸ªä¾èµ–ï¼Œç„¶åé‡æ–°æ‰§è¡Œ `npm install`

### Q3: ç¼–è¯‘åè¿˜æ˜¯æŠ¥é”™

**A:** å°è¯•ä»¥ä¸‹æ­¥éª¤ï¼š

1. å…³é—­å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. åˆ é™¤é¡¹ç›®ä¸­çš„ `miniprogram_npm` æ–‡ä»¶å¤¹
3. é‡æ–°æ‰“å¼€å·¥å…·
4. æ¸…é™¤ç¼“å­˜
5. é‡æ–°ç¼–è¯‘

### Q4: æç¤º"Cannot find name 'WechatMiniprogram'"

**A:** ç¡®ä¿ `typings/index.d.ts` ç¬¬ä¸€è¡Œæ˜¯ï¼š

```typescript
/// <reference types="miniprogram-api-typings" />
```

ç„¶åé‡æ–°ç¼–è¯‘ã€‚

## ğŸ“ éªŒè¯æ˜¯å¦ä¿®å¤æˆåŠŸ

ç¼–è¯‘æˆåŠŸåï¼Œåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ä¸­ï¼š

1. **ä¸åº”è¯¥å†æœ‰**çº¢è‰²çš„ `ReferenceError` é”™è¯¯
2. **åº”è¯¥èƒ½çœ‹åˆ°**å°ç¨‹åºæ­£å¸¸è¿è¡Œ
3. **Network æ ‡ç­¾**åº”è¯¥èƒ½çœ‹åˆ° API è¯·æ±‚

## ğŸš€ ä¸‹ä¸€æ­¥

ä¿®å¤æˆåŠŸåï¼Œå¯ä»¥ï¼š

1. å¯åŠ¨åç«¯æœåŠ¡ï¼š`cd yuntun-java && mvn spring-boot:run`
2. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹ Network é¢æ¿
3. æ“ä½œå°ç¨‹åºï¼ŒæŸ¥çœ‹æ¥å£è°ƒç”¨æƒ…å†µ

## ğŸ“ è¿˜æœ‰é—®é¢˜ï¼Ÿ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³ï¼Œè¯·æä¾›ï¼š

1. Node.js ç‰ˆæœ¬ï¼š`node -v`
2. npm ç‰ˆæœ¬ï¼š`npm -v`
3. å¾®ä¿¡å¼€å‘è€…å·¥å…·ç‰ˆæœ¬
4. å®Œæ•´çš„é”™è¯¯æ—¥å¿—

## ğŸ‰ æ€»ç»“

**å…³é”®æ“ä½œï¼š**
1. âœ… å®‰è£… `miniprogram-api-typings` åŒ…
2. âœ… é…ç½® `project.config.json` å¯ç”¨ TypeScript
3. âœ… æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°ç¼–è¯‘
4. âœ… ç¡®ä¿ç±»å‹å®šä¹‰æ–‡ä»¶æ­£ç¡®

**å®Œæˆååº”è¯¥ï¼š**
- ä¸å†æœ‰ `App is not defined` é”™è¯¯
- ä¸å†æœ‰ `Page is not defined` é”™è¯¯
- TypeScript ä»£ç èƒ½æ­£å¸¸ç¼–è¯‘ä¸º JavaScript
- å°ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œ

---

**æœ€åæ›´æ–°ï¼š** 2025-11-08
**çŠ¶æ€ï¼š** âœ… å·²è§£å†³

